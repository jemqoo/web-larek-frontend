# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Документация

## Базовый код

### 1. Класс Api для работы с сервером

#### Конструктор принимает такие аргументы:

1. baseUrl: string — базовый URL для Api.

2. options: RequestInit = {} — дополнительные опции запроса.

#### Класс имеет такие методы:

1. handleResponse — защищенный метод, который обрабатывает ответ от сервера. Проверяет статус ответа (если успешный, то преобразует ответ в JSON, если нет - возвращает ошибку или текст ошибки);

2. get — для выполнения GET-запроса. Добавляет к базовому URL указанный URI и выполняет GET-запрос с установленными опциями. Возвращает Promise с полученными данными после обработки ответа;

3. post — для выполнения POST-запроса. Аналогично методу GET, добавляет к базовому URL указанный URI и выполняет POST-запрос с переданными данными в формате JSON и указанным методом запроса. Возвращает Promise с полученными данными после обработки ответа.

### 2. Класс EventEmitter - брокер событий

#### Класс имеет такие методы:

1. on — установить обработчик на событие;

2. off — cнять обработчик с события;

3. emit — инициировать событие с данными;

4. onAll — слушать все события;

5. offAll — сбросить все обработчики;

6. trigger — сделать коллбек триггер, генерирующий событие при вызове;

### 3. Класс Model - абстрактный базовый класс для всех моделей данных в проекте

#### Конструктор принимает такие аргументы:

1. data: Partial<T> — представляет частичные данные модели типа T;

2. events: IEvents — является объектом событий (IEvents) для уведомления об изменениях в модели.

#### Класс имеет один метод:

1. emitChanges — сообщает всем, что модель поменялась.

### 4. Класс Component - абстрактный класс, родительский класс для всех классов отображения

#### Конструктор принимает один аргумент:

1. container: HTMLElement — представляет корневой элемент (HTMLElement), в котором будет отображаться компонент, используется для размещения содержимого компонента внутри DOM.

#### Класс имеет такие методы:

1. toggleClass — переключить класс;
2. setText — установить текстовое содержимое;
3. setDisabled — сменить статус блокировки;
4. setHidden — скрыть элемент;
5. setVisible — показать элемент;
6. setImage — установить изображение с алтернативным текстом;
7. render — вернуть корневой DOM-элемент.

## Компоненты модели данных

### Класс AppData

Этот класс отвечает за данные всех функционалов, реализованных в проекте. В нём содержатся методы, в которых и происходит работа непосредственно с данными приложения: с данными приходящими с сервера или уходящими на сервер, изменяющими состав товаров в модальных окнах и в корзине, а также работа со значениями в полях форм оформления заказа.

## Компоненты представления

Класс представления, от которого наследуют все другие классы представления - это класс Component. От него непосредственно наследуют "общие" классы Modal, Basket, Form, Success. Далее ещё есть классы представления, которые более приближены к конкретному проекту, и у них нет наследников, это классы: Page, Card, Order, Contacts.

## Ключевые типы данных

// интерфейс, описывающий карточку товара
export interface IProductItem {
id: string;
description: string;
image: string;
title: string;
category: string;
price: number;
}

// интерфейс модели приложения
export interface IAppState {
catalog: IProductItem[];
basket: string[];
order: IOrderForm | null;
}

// интерфейс, описывающий форму заказа
export interface IOrderForm {
payment: string;
address: string;
}

// интерфейс, описывающий форму контактов
export interface Contacts {
email: string;
phone: string;
}
